#vest.conf
my $config = {vest_base_url=>'/vest'};
$config = {
    %$config,
    # Comment the next two lines after the first run if you do not want
    # these files to be executed on each next start.
    vest_schema_sql_file => 'ado-sqlite-schema-vest.sql',
    vest_data_sql_file => 'ado-sqlite-data-vest.sql',
    routes               => [
        #default view
        {route => $$config{vest_base_url}, via => ['GET'], to => 'vest#screen', over => {authenticated => 1,},},
        #lists all messages
        {route => $$config{vest_base_url}.'/list', via => ['GET'], to => 'vest#list', over => {authenticated => 1},},

        #Lists messages from a talk of the current user (by subject_message_id)
        {   route  => $$config{vest_base_url}.'/messages/:id',
            via    => ['GET'],
            params => {id => qr/\d+/},
            to     => 'vest#list_messages',
            over   => {authenticated => 1},
        },

        #Lists talks of the current user
        {   route  => $$config{vest_base_url}.'/talks',
            via    => ['GET'],
            to     => 'vest#list_talks',
            over   => {authenticated => 1},
        },
        {route => $$config{vest_base_url}, via => ['POST'], to => 'vest#create', over => {authenticated => 1},},
        {   route  => "$$config{vest_base_url}/:id",
            params => {id => qr/\d+/},
            via    => ['GET'],
            to     => 'vest#show',
            over   => {authenticated => 1},
        },
        {   route  => $$config{vest_base_url}.'/:id',
            params => {id => qr/\d+/},
            via    => ['PUT'],
            to     => 'vest#update',
            over   => {authenticated => 1},
        },
        {   route  => $$config{vest_base_url}.'/:id',
            params => {id => qr/\d+/},
            via    => ['DELETE'],
            to     => 'vest#disable',
            over   => {authenticated => 1},
        },
    ],
};
